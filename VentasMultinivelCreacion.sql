--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 8.0.856
--   Created On : Friday, 30 March, 2018 
--   DBMS       : Oracle 
--   -------------------------------------------------- 
CREATE TABLE CLIENTE
(
	K_CODCLIENTE  NUMBER(11) NOT NULL,    --  CÓDIGO DEL CLIENTE QUE ES LA MISMA CÉDULA DEL CLIENTE 
	N_NOMBRE      VARCHAR2(50) NOT NULL,    --  NOMBRE DEL CLIENTE 
	N_APELLIDO    VARCHAR2(50) NOT NULL,    --  APELLIDO DEL CLIENTE 
	I_DIRECCION   VARCHAR2(75) NOT NULL,    --  DIRECCIÓN DEL CLIENTE 
	I_CIUDAD      VARCHAR2(50) NOT NULL,    --  CIUDAD DEL CLIENTE 
	I_TELEFONO    NUMBER(10) NOT NULL,    --  TELÉFONO DE CONTACTO DEL CLIENTE 
	I_CORREO      VARCHAR2(100) NOT NULL,    --  CORREO ELECTRÓNICO DEL CLIENTE 
	K_REPVENTAS   NUMBER(11) NOT NULL    --  REPRESENTANTE DE VENTAS QUE LO CAPTO 
)
;

COMMENT ON TABLE CLIENTE IS 'TABLA DONDE SE ALMACENAN LOS CLIENTES'
;
COMMENT ON COLUMN CLIENTE.K_CODCLIENTE  IS 'CÓDIGO DEL CLIENTE QUE ES LA MISMA CÉDULA DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.N_NOMBRE      IS 'NOMBRE DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.N_APELLIDO    IS 'APELLIDO DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.I_DIRECCION   IS 'DIRECCIÓN DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.I_CIUDAD      IS 'CIUDAD DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.I_TELEFONO    IS 'TELÉFONO DE CONTACTO DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.I_CORREO      IS 'CORREO ELECTRÓNICO DEL CLIENTE'
;
COMMENT ON COLUMN CLIENTE.K_REPVENTAS   IS 'REPRESENTANTE DE VENTAS QUE LO CAPTÓ'
;
CREATE TABLE CATEGORIA
(
	K_CODCATEGORIA  NUMBER(3) NOT NULL,    --  CÓDIGO DE LA CATEGORÍA DE LOS PRODUCTOS 
	N_NOMBRE        VARCHAR2(50) NOT NULL,    --  NOMBRE DE LA CATEGORÍA 
	O_DESCRIPCION   VARCHAR2(150) NOT NULL    --  DESCRIPCIÓN DE LA CATEGORÍA 
)
;

COMMENT ON TABLE CATEGORIA IS 'TABLA DE LAS CATEGORÍAS DE LOS PRODUCTOS'
;
COMMENT ON COLUMN CATEGORIA.K_CODCATEGORIA  IS 'CÓDIGO DE LA CATEGORÍA DE LOS PRODUCTOS'
;
COMMENT ON COLUMN CATEGORIA.N_NOMBRE        IS 'NOMBRE DE LA CATEGORÍA'
;
COMMENT ON COLUMN CATEGORIA.O_DESCRIPCION   IS 'DESCRIPCIÓN DE LA CATEGORÍA'
;

CREATE TABLE CLASIFICACION
(
	K_CODCLASI     NUMBER(3) NOT NULL,    --  CÓDIGO DE CLASIFICACIÓN DE LOS REPRESENTANTES DE VENTAS 
	N_NOMBRE       VARCHAR2(15) NOT NULL,    --  NOMBRE DE LA CLASIFICACIÓN DE LOS REPRESENTANTES DE VENTAS 
	V_PORCOMISION  NUMBER(4,2) NOT NULL    --  PORCENTAJE DE COMISIÓN QUE LE CORRESPONDE AL REPRESENTANTE DE VENTAS SEGÚN SU CLASIFICACIÓN 
)
;

COMMENT ON TABLE CLASIFICACION IS 'TABLA DE CLASIFICACIÓN DE LOS REPRESENTANTES DE VENTAS'
;
COMMENT ON COLUMN CLASIFICACION.K_CODCLASI     IS 'CÓDIGO DE CLASIFICACIÓN DE LOS REPRESENTANTES DE VENTAS'
;
COMMENT ON COLUMN CLASIFICACION.N_NOMBRE       IS 'NOMBRE DE LA CLASIFICACIÓN DE LOS REPRESENTANTES DE VENTAS'
;
COMMENT ON COLUMN CLASIFICACION.V_PORCOMISION  IS 'PORCENTAJE DE COMISIÓN '
;



CREATE TABLE PAIS
(
	K_CODPAIS  NUMBER(3) NOT NULL,    --  CÓDIGO DEL PAÍS 
	N_NOMBRE   VARCHAR2(50) NOT NULL    --  NOMBRE DEL PAÍS 
)
;

COMMENT ON TABLE PAIS IS 'TABLA DONDE SE ALMACENAN LOS PAÍSES'
;
COMMENT ON COLUMN PAIS.K_CODPAIS  IS 'CÓDIGO DEL PAÍS'
;
COMMENT ON COLUMN PAIS.N_NOMBRE   IS 'NOMBRE DEL PAÍS'
;

CREATE TABLE PRECIO
(
	K_PRODUCTO  VARCHAR2(10) NOT NULL,    --  LLAVE FORÁNEA QUE IDENTIFICA EL PRODUCTO 
	F_FECHA     DATE NOT NULL,    --  FECHA EN LA QUE EL PRODUCTO CAMBIO DE PRECIO 
	V_PRECIO    NUMBER(15,3) NOT NULL    --  PRECIO DEL PRODUCTO 
)
;

COMMENT ON TABLE PRECIO IS 'TABLA DE PRECIOS DE LOS PRODCUTOS Y SU HISTORIAL DE PRECIOS'
;
COMMENT ON COLUMN PRECIO.K_PRODUCTO  IS 'LLAVE FORÁNEA QUE IDENTIFICA EL PRODUCTO'
;
COMMENT ON COLUMN PRECIO.F_FECHA     IS 'FECHA EN LA QUE EL PRODUCTO CAMBIO DE PRECIO'
;
COMMENT ON COLUMN PRECIO.V_PRECIO    IS 'PRECIO DEL PRODUCTO'
;

CREATE TABLE PRODUCTO
(
	K_CODPRODUCTO   VARCHAR2(10) NOT NULL,    --  CÓDIGO DEL PRODUCTO 
	N_NOMBRE        VARCHAR2(50) NOT NULL,    --  NOMBRE DEL PRODUCTO 
	O_DESCRIPCION   VARCHAR2(150) NOT NULL,    --  DESCRIPCIÓN DEL PRODUCTO 
	K_SUBCATEGORIA  NUMBER(5) NOT NULL    --  LLAVE FORÁNEA DE LA CATEGORÍA 
)
;

COMMENT ON TABLE PRODUCTO IS 'TABLA DE PRODUCTOS CON SU INFORMACIÓN'
;
COMMENT ON COLUMN PRODUCTO.K_CODPRODUCTO   IS 'CÓDIGO DEL PRODUCTO'
;
COMMENT ON COLUMN PRODUCTO.N_NOMBRE        IS 'NOMBRE DEL PRODUCTO'
;
COMMENT ON COLUMN PRODUCTO.O_DESCRIPCION   IS 'DESCRIPCIÓN DEL PRODUCTO'
;
COMMENT ON COLUMN PRODUCTO.K_SUBCATEGORIA  IS 'LLAVE FORÁNEA DE LA CATEGORÍA'
;

CREATE TABLE PRODUCTO_REGION
(
	K_PRODUCTO  VARCHAR2(10) NOT NULL,    --  LLAVE FORÁNEA DEL PRODUCTO 
	K_REGION    NUMBER(4) NOT NULL,    --  LLAVE FORÁNEA DE LA REGION 
	Q_STOCK     NUMBER(7) NOT NULL    --  CANTIDAD DEL PRODUCTO EN EL INVENTARIO 
)
;

COMMENT ON TABLE PRODUCTO_REGION IS 'TABLA DE ROMPIMIENTO PARA MANTENER LA RELACIÓN DE UN PRODUCTO EN LAS DIFERENTES REGIONES'
;
COMMENT ON COLUMN PRODUCTO_REGION.K_PRODUCTO  IS 'LLAVE FORÁNEA DEL PRODUCTO'
;
COMMENT ON COLUMN PRODUCTO_REGION.K_REGION    IS 'LLAVE FORÁNEA DE LA REGION'
;
COMMENT ON COLUMN PRODUCTO_REGION.Q_STOCK     IS 'CANTIDAD DEL PRODUCTO EN EL INVENTARIO'
;

CREATE TABLE PRODUCTO_VENTA
(
	K_PRODUCTO  VARCHAR2(10) NOT NULL,    --  LLAVE FORÁNEA DEL PRODUCTO 
	K_VENTA     NUMBER(15) NOT NULL,    --  LLAVE FORÁNEA DE LA VENTA 
	Q_CANTIDAD  NUMBER(7) NOT NULL    --  CANTIDAD POR PRODUCTO QUE LLEVARÁ EL CLIENTE 
)
;

COMMENT ON TABLE PRODUCTO_VENTA IS 'TABLA DE DETALLE DE LA VENTA'
;
COMMENT ON COLUMN PRODUCTO_VENTA.K_PRODUCTO  IS 'LLAVE FORÁNEA DEL PRODUCTO'
;
COMMENT ON COLUMN PRODUCTO_VENTA.K_VENTA     IS 'LLAVE FORÁNEA DE LA VENTA'
;
COMMENT ON COLUMN PRODUCTO_VENTA.Q_CANTIDAD  IS 'CANTIDAD POR PRODUCTO QUE LLEVARÁ EL CLIENTE'
;

CREATE TABLE REGION
(
	K_CODREGION  NUMBER(4) NOT NULL,    --  CÓDIGO DE LA REGIÓN 
	N_NOMBRE     VARCHAR2(50) NOT NULL,    --  NOMBRE DE LA REGIÓN 
	K_PAIS       NUMBER(3) NOT NULL    --  LLAVE FORÁNEA DEL PAÍS 
)
;

COMMENT ON TABLE REGION IS 'TABLA DONDE SE ALMACENAN LAS REGIONES'
;
COMMENT ON COLUMN REGION.K_CODREGION  IS 'CÓDIGO DE LA REGIÓN'
;
COMMENT ON COLUMN REGION.N_NOMBRE     IS 'NOMBRE DE LA REGIÓN'
;
COMMENT ON COLUMN REGION.K_PAIS       IS 'LLAVE FORÁNEA DEL PAÍS'
;

CREATE TABLE REP_VENTAS
(
	K_CODREPVENTAS   NUMBER(11) NOT NULL,    --  CÓDIGO REPRESENTANTE DE VENTAS, QUE ES LA MISMA CÉDULA DEL REPRESENTANTE DE VENTAS 
	N_NOMBRE         VARCHAR2(50) NOT NULL,    --  NOMBRE REPRESENTANTE DE VENTAS 
	N_APELLIDO       VARCHAR2(50) NOT NULL,    --  APELLIDO DEL REPRESENTANTE DE VENTAS 
	I_CORREO         VARCHAR2(100) NOT NULL,    --  CORREO ELECTRÓNICO DEL REPRESENTANTE DE VENTAS 
	I_GENERO         VARCHAR2(50) NOT NULL,    --  GÉNERO DEL REPRESENTANTE DE VENTAS 
	F_FECHANAC       DATE NOT NULL,    --  FECHA DE NACIMIENTO DEL REPRESENTANTE DE VENTAS 
	F_FECHACON       DATE NOT NULL,    --  FECHA DEL CONTRATO DEL REPRESENTANTE DE VENTAS 
	I_TELEFONO       NUMBER(10) NOT NULL,    --  TELÉFONO DE CONTACTO DEL REPRESENTANTE DE VENTAS 
	I_DIRECCION      VARCHAR2(75) NOT NULL,    --  DIRECCIÓN DE RESIDENCIA DEL REPRESENTANTE DE VENTAS 
	K_REGION         NUMBER(4) NOT NULL,    --  REGIONAL A LA CUAL ESTÁ INSCRITO EL REPRESENTANTE DE VENTAS 
	K_CODREPREGIS    NUMBER(11),    --  CÓDIGO DEL REPRESENTANTE DE VENTAS QUE LO INTRODUJO 
	K_CLASIFICACION  NUMBER(3) NOT NULL    --  LLAVE FORÁNEA DE CLASIFICACIÓN DE REPRESENTANTE DE VENTAS 
)
;

COMMENT ON TABLE REP_VENTAS IS 'TABLA DE REPRESENTANTES DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.K_CODREPVENTAS   IS 'CÓDIGO REPRESENTANTE DE VENTAS, QUE ES LA MISMA CÉDULA DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.N_NOMBRE         IS 'NOMBRE REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.N_APELLIDO       IS 'APELLIDO DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.I_CORREO         IS 'CORREO ELECTRÓNICO DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.I_GENERO         IS 'GÉNERO DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.F_FECHANAC       IS 'FECHA DE NACIMIENTO DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.F_FECHACON       IS 'FECHA DEL CONTRATO DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.I_TELEFONO       IS 'TELÉFONO DE CONTACTO DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.I_DIRECCION      IS 'DIRECCIÓN DE RESIDENCIA DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.K_REGION         IS 'REGIONAL A LA CUAL ESTÁ INSCRITO EL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN REP_VENTAS.K_CODREPREGIS    IS 'CÓDIGO DEL REPRESENTANTE DE VENTAS QUE LO INTRODUJO'
;
COMMENT ON COLUMN REP_VENTAS.K_CLASIFICACION  IS 'LLAVE FORÁNEA DE CLASIFICACIÓN DE REPRESENTANTE DE VENTAS'
;

CREATE TABLE SUBCATEGORIA
(
	K_CODSUBCATEGORIA  NUMBER(5) NOT NULL,    --  CÓDIGO SUBCATEGORÍA 
	N_NOMBRE           VARCHAR2(50) NOT NULL,    --  NOMBRE DE LA SUBCATEGORÍA 
	O_DESCRIPCION      VARCHAR2(150) NOT NULL,    --  DESCRIPCIÓN DE LA SUBCATEGORÍA 
	K_CATEGORIA        NUMBER(3) NOT NULL    --  LLAVE FORÁNEA DE CATEGORÍA 
)
;

COMMENT ON TABLE SUBCATEGORIA IS 'TABLA DE SUBCATEGORÍAS DE LOS PRODUCTOS'
;
COMMENT ON COLUMN SUBCATEGORIA.K_CODSUBCATEGORIA  IS 'CÓDIGO SUBCATEGORÍA'
;
COMMENT ON COLUMN SUBCATEGORIA.N_NOMBRE           IS 'NOMBRE DE LA SUBCATEGORÍA'
;
COMMENT ON COLUMN SUBCATEGORIA.O_DESCRIPCION      IS 'DESCRIPCIÓN DE LA SUBCATEGORÍA'
;
COMMENT ON COLUMN SUBCATEGORIA.K_CATEGORIA        IS 'LLAVE FORÁNEA DE CATEGORÍA'
;

CREATE TABLE VENTA
(
	K_CODVENTA     NUMBER(15) NOT NULL,    --  CÓDIGO DE LA VENTA 
	F_FECHA        DATE NOT NULL,    --  FECHA EN LA QUE SE HIZO LA VENTA 
	V_PRECIOFINAL  NUMBER(15,2) NOT NULL,    --  PRECIO FINAL DE LA VENTA 
	I_ESTADO       CHAR(15) NOT NULL,    --  ESTADO DE LA VENTA 
	K_CLIENTE      NUMBER(11) NOT NULL    --  LLAVE FORÁNEA DEL CLIENTE 
)
;

COMMENT ON TABLE VENTA IS 'TABLA DE LAS VENTAS'
;
COMMENT ON COLUMN VENTA.K_CODVENTA     IS 'CÓDIGO DE LA VENTA'
;
COMMENT ON COLUMN VENTA.F_FECHA        IS 'FECHA EN LA QUE SE HIZO LA VENTA'
;
COMMENT ON COLUMN VENTA.V_PRECIOFINAL  IS 'PRECIO FINAL DE LA VENTA'
;
COMMENT ON COLUMN VENTA.I_ESTADO       IS 'ESTADO DE LA VENTA'
;
COMMENT ON COLUMN VENTA.K_CLIENTE      IS 'LLAVE FORÁNEA DEL CLIENTE'
;

CREATE TABLE VENTA_REPVENTA
(
	K_REPVENTA      NUMBER(11) NOT NULL,    --  LLAVE FORÁNEA DEL REPRESENTANTE DE VENTAS 
	K_VENTA         NUMBER(15) NOT NULL,    --  LLAVE FORÁNEA DE LA VENTA 
	V_CALIFICACION  NUMBER(2,1),    --  CALIFICACIÓN QUE DA EL CLIENTE AL REPRESENTANTE DE VENTAS 
	V_COMISION      NUMBER(15,2) NOT NULL    --  VALOR QUE GANA EL REPRESENTANTE DE VENTAS POR LA VENTA 
)
;

COMMENT ON TABLE VENTA_REPVENTA IS 'TABLA QUE IDENTIFICA EL REPRESENTANTE DE VENTAS CON LA VENTA'
;
COMMENT ON COLUMN VENTA_REPVENTA.K_REPVENTA      IS 'LLAVE FORÁNEA DEL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN VENTA_REPVENTA.K_VENTA         IS 'LLAVE FORÁNEA DE LA VENTA'
;
COMMENT ON COLUMN VENTA_REPVENTA.V_CALIFICACION  IS 'CALIFICACIÓN QUE DA EL CLIENTE AL REPRESENTANTE DE VENTAS'
;
COMMENT ON COLUMN VENTA_REPVENTA.V_COMISION      IS 'VALOR QUE GANA EL REPRESENTANTE DE VENTAS POR LA VENTA'
;


--  Create Primary Key Constraints 
ALTER TABLE CATEGORIA ADD CONSTRAINT PK_CATEGORIA 
	PRIMARY KEY (K_CODCATEGORIA)
;

ALTER TABLE CLASIFICACION ADD CONSTRAINT PK_CLASIFICACION 
	PRIMARY KEY (K_CODCLASI)
;

ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTE 
	PRIMARY KEY (K_CODCLIENTE)
;

ALTER TABLE PAIS ADD CONSTRAINT PK_PAIS 
	PRIMARY KEY (K_CODPAIS)
;

ALTER TABLE PRODUCTO ADD CONSTRAINT PK_PRODUCTO 
	PRIMARY KEY (K_CODPRODUCTO)
;

ALTER TABLE REGION ADD CONSTRAINT PK_REGION 
	PRIMARY KEY (K_CODREGION)
;

ALTER TABLE REP_VENTAS ADD CONSTRAINT PK_REP_VENTAS 
	PRIMARY KEY (K_CODREPVENTAS)
;

ALTER TABLE SUBCATEGORIA ADD CONSTRAINT PK_SUBCATEGORIA 
	PRIMARY KEY (K_CODSUBCATEGORIA)
;

ALTER TABLE VENTA ADD CONSTRAINT PK_VENTA 
	PRIMARY KEY (K_CODVENTA)
;


--  Create Indexes 
ALTER TABLE CLASIFICACION
ADD CONSTRAINT CK_N_NOMBRE CHECK (N_NOMBRE IN ('INACTIVO','BEGINNER','JUNIOR','SENIOR','MASTER','DIRECTOR'))
;

ALTER TABLE CLASIFICACION
ADD CONSTRAINT CK_V_PORCOMISION CHECK (V_PORCOMISION>=0)
;

CREATE INDEX IXFK_CLIENTE_REP_VENTAS ON CLIENTE
(K_REPVENTAS ASC)
;

ALTER TABLE CLIENTE
ADD CONSTRAINT CK_K_CODCLIENTE CHECK (K_CODCLIENTE>0)
;

ALTER TABLE CLIENTE
ADD CONSTRAINT CK_I_TELEFONO CHECK (I_TELEFONO>0)
;

CREATE INDEX IXFK_PRECIO_PRODUCTO ON PRECIO
(K_PRODUCTO ASC)
;

ALTER TABLE PRECIO
ADD CONSTRAINT CK_V_PRECIO CHECK (V_PRECIO>=0)
;

ALTER TABLE PRECIO
	ADD CONSTRAINT UQ_K_PRODUCTO_F_FECHA UNIQUE (K_PRODUCTO, F_FECHA)
;

CREATE INDEX IXFK_PRODUCTO_SUBCATEGORIA ON PRODUCTO
(K_SUBCATEGORIA ASC)
;

CREATE INDEX IXFK_PRODUCTO_REGION_PRODUCTO ON PRODUCTO_REGION
(K_PRODUCTO ASC)
;

CREATE INDEX IXFK_PRODUCTO_REGION_REGION ON PRODUCTO_REGION
(K_REGION ASC)
;

ALTER TABLE PRODUCTO_REGION
ADD CONSTRAINT CK_Q_STOCK CHECK (Q_STOCK>=0)
;

CREATE INDEX IXFK_PRODUCTO_VENTA_PRODUCTO ON PRODUCTO_VENTA
(K_PRODUCTO ASC)
;

CREATE INDEX IXFK_PRODUCTO_VENTA_VEN02 ON PRODUCTO_VENTA
(K_VENTA ASC)
;

CREATE INDEX IXFK_PRODUCTO_VENTA_VENTA ON PRODUCTO_VENTA
(K_VENTA ASC)
;

ALTER TABLE PRODUCTO_VENTA
ADD CONSTRAINT CK_Q_CANTIDAD CHECK (Q_CANTIDAD>0)
;

CREATE INDEX IXFK_REGION_PAIS ON REGION
(K_PAIS ASC)
;

CREATE INDEX IXFK_REP_VENTAS_CLASIFICACION ON REP_VENTAS
(K_CLASIFICACION ASC)
;

CREATE INDEX IXFK_REP_VENTAS_REGION ON REP_VENTAS
(K_REGION ASC)
;

CREATE INDEX IXFK_REP_VENTAS_REP_VENTAS ON REP_VENTAS
(K_CODREPREGIS ASC)
;

ALTER TABLE REP_VENTAS
ADD CONSTRAINT CK_I_GENERO CHECK (I_GENERO IN ('F','M'))
;

ALTER TABLE REP_VENTAS
ADD CONSTRAINT CK_K_CODREPVENTAS CHECK (K_CODREPVENTAS>0)
;

ALTER TABLE REP_VENTAS
ADD CONSTRAINT CK_I_TELEFONO CHECK (I_TELEFONO>0)
;

CREATE INDEX IXFK_SUBCATEGORIA_CATEGORIA ON SUBCATEGORIA
(K_CATEGORIA ASC)
;

CREATE INDEX IXFK_VENTA_CLIENTE ON VENTA
(K_CLIENTE ASC)
;

ALTER TABLE VENTA
ADD CONSTRAINT CK_I_ESTADO CHECK (I_ESTADO IN ('ACTIVO','CANCELADO','TERMINADO'))
;

ALTER TABLE VENTA
ADD CONSTRAINT CK_V_PRECIOFINAL CHECK (V_PRECIOFINAL>=0)
;

CREATE INDEX IXFK_VENTA_REPVENTA_REP_VENTAS ON VENTA_REPVENTA
(K_REPVENTA ASC)
;

CREATE INDEX IXFK_VENTA_REPVENTA_VENTA ON VENTA_REPVENTA
(K_VENTA ASC)
;

ALTER TABLE VENTA_REPVENTA
ADD CONSTRAINT CK_V_CALIFICACION CHECK (V_CALIFICACION>=0 AND V_CALIFICACION<=5)
;

ALTER TABLE VENTA_REPVENTA
ADD CONSTRAINT CK_V_COMISION CHECK (V_COMISION>=0)
;


--  Create Foreign Key Constraints 
ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_REP_VENTAS 
	FOREIGN KEY (K_REPVENTAS) REFERENCES REP_VENTAS (K_CODREPVENTAS)
;

ALTER TABLE PRECIO ADD CONSTRAINT FK_PRECIO_PRODUCTO 
	FOREIGN KEY (K_PRODUCTO) REFERENCES PRODUCTO (K_CODPRODUCTO)
;

ALTER TABLE PRODUCTO ADD CONSTRAINT FK_PRODUCTO_SUBCATEGORIA 
	FOREIGN KEY (K_SUBCATEGORIA) REFERENCES SUBCATEGORIA (K_CODSUBCATEGORIA)
;

ALTER TABLE PRODUCTO_REGION ADD CONSTRAINT FK_PRODUCTO_REGION_PRODUCTO 
	FOREIGN KEY (K_PRODUCTO) REFERENCES PRODUCTO (K_CODPRODUCTO)
;

ALTER TABLE PRODUCTO_REGION ADD CONSTRAINT FK_PRODUCTO_REGION_REGION 
	FOREIGN KEY (K_REGION) REFERENCES REGION (K_CODREGION)
;

ALTER TABLE PRODUCTO_VENTA ADD CONSTRAINT FK_PRODUCTO_VENTA_PRODUCTO 
	FOREIGN KEY (K_PRODUCTO) REFERENCES PRODUCTO (K_CODPRODUCTO)
;

ALTER TABLE REGION ADD CONSTRAINT FK_REGION_PAIS 
	FOREIGN KEY (K_PAIS) REFERENCES PAIS (K_CODPAIS)
;

ALTER TABLE REP_VENTAS ADD CONSTRAINT FK_REP_VENTAS_CLASIFICACION 
	FOREIGN KEY (K_CLASIFICACION) REFERENCES CLASIFICACION (K_CODCLASI)
;

ALTER TABLE REP_VENTAS ADD CONSTRAINT FK_REP_VENTAS_REGION 
	FOREIGN KEY (K_REGION) REFERENCES REGION (K_CODREGION)
;

ALTER TABLE REP_VENTAS ADD CONSTRAINT FK_REP_VENTAS_REP_VENTAS 
	FOREIGN KEY (K_CODREPREGIS) REFERENCES REP_VENTAS (K_CODREPVENTAS)
;

ALTER TABLE SUBCATEGORIA ADD CONSTRAINT FK_SUBCATEGORIA_CATEGORIA 
	FOREIGN KEY (K_CATEGORIA) REFERENCES CATEGORIA (K_CODCATEGORIA)
;

ALTER TABLE VENTA ADD CONSTRAINT FK_VENTA_CLIENTE 
	FOREIGN KEY (K_CLIENTE) REFERENCES CLIENTE (K_CODCLIENTE)
;

ALTER TABLE VENTA_REPVENTA ADD CONSTRAINT FK_VENTA_REPVENTA_REP_VENTAS 
	FOREIGN KEY (K_REPVENTA) REFERENCES REP_VENTAS (K_CODREPVENTAS)
;

ALTER TABLE VENTA_REPVENTA ADD CONSTRAINT FK_VENTA_REPVENTA_VENTA 
	FOREIGN KEY (K_VENTA) REFERENCES VENTA (K_CODVENTA)

CREATE SEQUENCE SEQ_PAIS
INCREMENT BY 1
START WITH 1;

CREATE SEQUENCE SEQ_REGION
INCREMENT BY 1
START WITH 1;

CREATE SEQUENCE SEQ_CATEGORIA
INCREMENT BY 1
START WITH 1;

CREATE SEQUENCE SEQ_SUBCATEGORIA
INCREMENT BY 1
START WITH 1;

CREATE SEQUENCE SEQ_CALIFICACION
INCREMENT BY 1
START WITH 1;

CREATE SEQUENCE SEQ_VENTA
INCREMENT BY 1
START WITH 1;

CREATE PUBLIC SYNONYM CATEGORIA FOR MULTINIVEL.CATEGORIA;
CREATE PUBLIC SYNONYM CLASIFICACION FOR MULTINIVEL.CLASIFICACION;
CREATE PUBLIC SYNONYM CLIENTE FOR MULTINIVEL.CLIENTE;
CREATE PUBLIC SYNONYM PAIS FOR MULTINIVEL.PAIS;
CREATE PUBLIC SYNONYM PRECIO FOR MULTINIVEL.PRECIO;
CREATE PUBLIC SYNONYM PRODUCTO FOR MULTINIVEL.PRODUCTO;
CREATE PUBLIC SYNONYM PRODUCTO_REGION FOR MULTINIVEL.PRODUCTO_REGION;
CREATE PUBLIC SYNONYM PRODUCTO_VENTA FOR MULTINIVEL.PRODUCTO_VENTA;
CREATE PUBLIC SYNONYM REGION FOR MULTINIVEL.REGION;
CREATE PUBLIC SYNONYM REP_VENTAS FOR MULTINIVEL.REP_VENTAS;
CREATE PUBLIC SYNONYM SUBCATEGORIA FOR MULTINIVEL.SUBCATEGORIA;
CREATE PUBLIC SYNONYM VENTA FOR MULTINIVEL.VENTA;
CREATE PUBLIC SYNONYM VENTA_REPVENTA FOR MULTINIVEL.VENTA_REPVENTA;
CREATE PUBLIC SYNONYM SEQ_PAIS FOR MULTINIVEL.SEQ_PAIS;
CREATE PUBLIC SYNONYM SEQ_REGION FOR MULTINIVEL.SEQ_REGION;
CREATE PUBLIC SYNONYM SEQ_CATEGORIA FOR MULTINIVEL.SEQ_CATEGORIA;
CREATE PUBLIC SYNONYM SEQ_SUBCATEGORIA FOR MULTINIVEL.SEQ_SUBCATEGORIA;
CREATE PUBLIC SYNONYM SEQ_CALIFICACION FOR MULTINIVEL.SEQ_CALIFICACION;
CREATE PUBLIC SYNONYM SEQ_VENTA FOR MULTINIVEL.SEQ_VENTA;
